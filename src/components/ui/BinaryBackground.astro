---
// BinaryBackground.astro
import Particles from "astro-particles";
import type { ISourceOptions } from "tsparticles-engine";

const options: ISourceOptions = {
    background: {
        color: "transparent"
    },
    fullScreen: {
        enable: true,
        zIndex: 10
    },
    fpsLimit: 60,
    particles: {
        color: {
            value: "#7d7d7d"
        },
        shape: {
            type: "char",
            character: {
                value: ["0", "1"],
                font: "Switzer-Regular"
            }
        },
        opacity: {
            value: 0.4,
            random: true
        },
        size: {
            value: 20,
            random: {
                enable: true,
                minimumValue: 16
            }
        },
        move: {
            enable: true,
            speed: 0.5,
            direction: "none"
        },
        number: {
            value: 40,
            density: {
                enable: true,
                value_area: 800
            }
        }
    },
    interactivity: {
        events: {
            onHover: {
                enable: true,
                mode: "repulse",
                // distance: 150
            }
        }
    },
    detectRetina: true
};
---

<script>
    import { type Engine } from "tsparticles-engine";
    import { loadSlim } from "tsparticles-slim";

    declare global {
        interface Window {
            particlesInit?: (engine: Engine) => Promise<void>;
            particlesLoaded?: (container: any) => void;
        }
    }

    window.particlesInit = async function (engine: Engine) {
        await loadSlim(engine);
    };
    
    window.particlesLoaded = function (container: any) {
        console.log("Fondo binario cargado");
    };
</script>

<Particles id="tsparticles" options={options} init="particlesInit" loaded="particlesLoaded" />

<style>
    #tsparticles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1;
        pointer-events: none;
    }

    @media (max-width: 768px) {
        #tsparticles {
            display: none;
        }
    }
</style>